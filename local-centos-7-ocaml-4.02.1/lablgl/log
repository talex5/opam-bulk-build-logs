+ uname -m
# Detecting depexts using flags: x86_64 linux "centos"
+ uname -s
+ opam list --safe --recursive --external=x86_64,linux,"centos" --required-by=lablgl
+ opam list --safe --recursive --external=source,x86_64,linux,"centos" --required-by=lablgl
# No extra OS packages requirements found.
The following actions will be performed:
  - install camlp4 4.02+system                                  [required by lablgl]
  - install lablgl 1.05       
===== 2 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[lablgl: from default] Command started
[lablgl: from default] Command started
[ERROR] The compilation of lablgl failed at "make glut".
[default] http://opam-archive:8080/archives/lablgl.1.05+opam.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[camlp4: sh] Command started
+ sh "./check-camlp4.sh" (CWD=/home/opam/.opam/system/build/camlp4.4.02+system)
- Camlp4 version 4.02.1
-> installed camlp4.4.02+system
[lablgl: cp Makefile.config.ex] Command started
+ cp "Makefile.config.ex" "Makefile.config" (CWD=/home/opam/.opam/system/build/lablgl.1.05)
[lablgl: mkdir] Command started
+ mkdir "-p" "/home/opam/.opam/system/bin" (CWD=/home/opam/.opam/system/build/lablgl.1.05)
[lablgl: make glut] Command started
+ make "glut" (CWD=/home/opam/.opam/system/build/lablgl.1.05)
- cd src && make all LIBDIR="`ocamlc -where`"
- make[1]: Entering directory `/home/opam/.opam/system/build/lablgl.1.05/src'
- ocamlc -pp camlp4o var2def.ml -o var2def
- ocamlc -pp camlp4o var2switch.ml -o var2switch
- make lablgl.cma
- make[2]: Entering directory `/home/opam/.opam/system/build/lablgl.1.05/src'
- ocamlrun ../src/var2def < gl_tags.var > gl_tags.h
- ocamlrun ../src/var2switch -table GL_ < gl_tags.var > gl_tags.c
- ocamlc -c -w s -ccopt "-c -O  -I/usr/X11R6/include" ml_gl.c
- make[2]: Leaving directory `/home/opam/.opam/system/build/lablgl.1.05/src'
- make[1]: Leaving directory `/home/opam/.opam/system/build/lablgl.1.05/src'
- ml_gl.c:10:19: fatal error: GL/gl.h: No such file or directory
-  #include <GL/gl.h>
-                    ^
- compilation terminated.
- make[2]: *** [ml_gl.o] Error 2
- make[1]: *** [all] Error 2
- make: *** [lib] Error 2


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions failed
  - install lablgl 1.05
The following changes have been performed
  - install camlp4 4.02+system

=-=- lablgl.1.05 troobleshooting =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> This package relies on external (system) dependencies that may be missing.
   `opam depext lablgl.1.05' may help you find the correct installation for
   your system.

#=== ERROR while installing lablgl.1.05 =======================================#
# opam-version         1.2.2 (c30ed46b7e70bcf0f872e482cbcbf6a1fa0c60b3)
# os                   linux
# command              make glut
# path                 /home/opam/.opam/system/build/lablgl.1.05
# compiler             system (4.02.1)
# exit-code            2
# env-file             /home/opam/.opam/system/build/lablgl.1.05/lablgl-1-d8a4ae.env
# stdout-file          /home/opam/.opam/system/build/lablgl.1.05/lablgl-1-d8a4ae.out
# stderr-file          /home/opam/.opam/system/build/lablgl.1.05/lablgl-1-d8a4ae.err
### stdout ###
# [...]
# make[1]: Entering directory `/home/opam/.opam/system/build/lablgl.1.05/src'
# ocamlc -pp camlp4o var2def.ml -o var2def
# ocamlc -pp camlp4o var2switch.ml -o var2switch
# make lablgl.cma
# make[2]: Entering directory `/home/opam/.opam/system/build/lablgl.1.05/src'
# ocamlrun ../src/var2def < gl_tags.var > gl_tags.h
# ocamlrun ../src/var2switch -table GL_ < gl_tags.var > gl_tags.c
# ocamlc -c -w s -ccopt "-c -O  -I/usr/X11R6/include" ml_gl.c
# make[2]: Leaving directory `/home/opam/.opam/system/build/lablgl.1.05/src'
# make[1]: Leaving directory `/home/opam/.opam/system/build/lablgl.1.05/src'
### stderr ###
# ml_gl.c:10:19: fatal error: GL/gl.h: No such file or directory
#  #include <GL/gl.h>
#                    ^
# compilation terminated.
# make[2]: *** [ml_gl.o] Error 2
# make[1]: *** [all] Error 2
# make: *** [lib] Error 2


The former state can be restored with:
    opam switch import "~/.opam/system/backup/state-20150606120717.export"
'opam install lablgl' failed.
