++ opam install mirari -e debian
+ depext=
Debian depexts:
+ echo Debian depexts:
+ '[' '' '!=' '' ']'
++ opam install mirari -e source,linux
Debian srcexts:
+ srcext=
+ echo Debian srcexts:
+ '[' '' '!=' '' ']'
+ opam install mirari
The following actions will be performed:
 - install   obuild.0.1.1                          [required by mirari]
 - install   cmdliner.0.9.7                        [required by mirari]
 - install   mirari.0.9.0
=== 3 to install ===

=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default] Downloading http://opam-archive:8080/archives/cmdliner.0.9.7+opam.tar.gz
[default] Downloading http://opam-archive:8080/archives/mirari.0.9.0+opam.tar.gz
[default] Downloading http://opam-archive:8080/archives/obuild.0.1.1+opam.tar.gz
  % T  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0otal    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0200
100  7488  100  7488    0     0   945k      0 --:--:-- --:--:-- --:--:-- 1044k
100 72388  100 72388    0     0  9031k      0 --:--:-- --:--:-- --:--:--  9.8M
200
100 66250  100 66250    0     0  5408k      0 --:--:-- --:--:-- --:--:-- 5881k
200

=-=- Installing packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Building obuild.0.1.1:
  ./bootstrap
Building cmdliner.0.9.7:
  ocaml pkg/git.ml
  ocaml pkg/build.ml native=true native-dynlink=true
COMPILING fugue
File "pkg/topkg-ext.ml", line 42, characters 12-25:
Warning 3: deprecated: String.create
Use Bytes.create instead.
COMPILING filepath
COMPILING filesystem
BUILDING library obuild_ext.cmxa
COMPILING types
COMPILING gconf
/usr/bin/ocamldep.opt -modules src/cmdliner.ml > src/cmdliner.ml.depends
COMPILING filetype
/usr/bin/ocamldep.opt -modules src/cmdliner.mli > src/cmdliner.mli.depends
COMPILING dag
/usr/bin/ocamlc.opt -c -I src -I test -o src/cmdliner.cmi src/cmdliner.mli
File "dag.ml", line 194, characters 23-34:
Warning 3: deprecated: String.copy
File "dag.ml", line 197, characters 39-62:
Warning 3: deprecated: String.set
Use Bytes.set instead.
/usr/bin/ocamlopt.opt -c -annot -bin-annot -I src -I test -o src/cmdliner.cmx src/cmdliner.ml
COMPILING libname
COMPILING pp
COMPILING expr
COMPILING utils
COMPILING modname
COMPILING taskdep
COMPILING helper
COMPILING dagutils
COMPILING process
File "process.ml", line 57, characters 12-25:
Warning 3: deprecated: String.create
Use Bytes.create instead.
COMPILING findlibConf
COMPILING scheduler
COMPILING prog
/usr/bin/ocamlopt.opt -a src/cmdliner.cmx -o src/cmdliner.cmxa
COMPILING dependencies
/usr/bin/ocamlc.opt -c -annot -bin-annot -I src -I test -o src/cmdliner.cmo src/cmdliner.ml
COMPILING generators
COMPILING hier
COMPILING meta
COMPILING target
COMPILING dist
/usr/bin/ocamlc.opt -a src/cmdliner.cmo -o src/cmdliner.cma
/usr/bin/ocamlopt.opt -shared src/cmdliner.cmx -o src/cmdliner.cmxs
COMPILING project
Installing cmdliner.0.9.7.
COMPILING analyze
COMPILING configure
COMPILING prepare
COMPILING buildprogs
COMPILING build
COMPILING exception
BUILDING library obuild.cmxa
COMPILING sdist
COMPILING doc
COMPILING init
COMPILING help
COMPILING install
COMPILING path_generated
COMPILING main
LINKING obuild.bootstrap
Configuring obuild-0.1.1...
[ 1 of 55] Compiling Ext.Fugue                     
[ 2 of 55] Intfing Ext.Filepath                  
[ 3 of 55] Compiling Ext.Filepath                  
[ 4 of 55] Intfing Ext.Filesystem                
[ 5 of 55] Compiling Ext.Filesystem                
[ 6 of 55] Packing Ext                           
[ 7 of 55] Linking library dist/build/lib-obuild.ext/obuild_ext.cmxa
[ 7 of 55] Linking library dist/build/lib-obuild.ext/obuild_ext.cmxs
[ 7 of 55] Linking library dist/build/lib-obuild.ext/obuild_ext.cma
[ 8 of 55] Checking dist/build/lib-obuild.ext
[ 9 of 55] Compiling Obuild.Dag                    
[10 of 55] Compiling Obuild.Filetype               
[11 of 55] Compiling Obuild.Expr                   
File "obuild/dag.ml", line 194, characters 23-34:
Warning 3: deprecated: String.copy
File "obuild/dag.ml", line 197, characters 39-62:
Warning 3: deprecated: String.set
Use Bytes.set instead.

[12 of 55] Compiling Obuild.Gconf                  
[13 of 55] Compiling Obuild.Modname                
[14 of 55] Compiling Obuild.Types                  
[15 of 55] Compiling Obuild.Pp                     
[16 of 55] Compiling Obuild.Taskdep                
[17 of 55] Compiling Obuild.Libname                
[18 of 55] Compiling Obuild.Utils                  
[19 of 55] Compiling Obuild.Dagutils               
[20 of 55] Compiling Obuild.Helper                 
[21 of 55] Compiling Obuild.Process                
File "obuild/process.ml", line 57, characters 12-25:
Warning 3: deprecated: String.create
Use Bytes.create instead.

[22 of 55] Compiling Obuild.Scheduler              
[23 of 55] Compiling Obuild.FindlibConf            
[24 of 55] Compiling Obuild.Prog                   
[25 of 55] Compiling Obuild.Generators             
[26 of 55] Compiling Obuild.Dependencies           
[27 of 55] Compiling Obuild.Hier                   
[28 of 55] Compiling Obuild.Meta                   
[29 of 55] Compiling Obuild.Target                 
[30 of 55] Compiling Obuild.Project                
[31 of 55] Compiling Obuild.Dist                   
[32 of 55] Compiling Obuild.Analyze                
[33 of 55] Compiling Obuild.Configure              
[34 of 55] Compiling Obuild.Prepare                
[35 of 55] Compiling Obuild.Buildprogs             
[36 of 55] Compiling Obuild.Build                  
[37 of 55] Compiling Obuild.Exception              
[38 of 55] Packing Obuild                        
[39 of 55] Linking library dist/build/lib-obuild/obuild.cmxa
[39 of 55] Linking library dist/build/lib-obuild/obuild.cmxs
[39 of 55] Linking library dist/build/lib-obuild/obuild.cma
[40 of 55] Checking dist/build/lib-obuild
[41 of 55] Compiling Assimilate_oasis              
[42 of 55] Compiling Simple                        
[43 of 55] Compiling Install                       
[44 of 55] Compiling Doc                           
[45 of 55] Compiling Sdist                         
[46 of 55] Compiling Help                          
[47 of 55] Compiling Path_generated                
[48 of 55] Compiling Init                          
[49 of 55] Linking executable dist/build/obuild-from-oasis/obuild-from-oasis
[50 of 55] Linking executable dist/build/obuild-simple/obuild-simple
[51 of 55] Compiling Main                          
[52 of 55] Checking dist/build/obuild-from-oasis
[53 of 55] Checking dist/build/obuild-simple
[54 of 55] Linking executable dist/build/obuild/obuild

real	0m3.313s
user	0m2.593s
sys	0m1.561s
[55 of 55] Checking dist/build/obuild
Installing obuild.0.1.1.
Building mirari.0.9.0:
  make
[ERROR] The compilation of mirari.0.9.0 failed.
make configure
make[1]: Entering directory `/home/opam/.opam/system/build/mirari.0.9.0'
obuild configure
Configuring mirari-0.9.0...
warning: obuild META search paths and ocaml config mismatch

  The ocamlfind configuration file used doesn't list the ocaml standard library 
  as part of his search paths. something fishy is going on
  You can solve the issue by:
  * pointing OCAMLFIND_CONF environment to the right configuration file
  * making sure that the ocamlfind program in your path is the right one (ocamlfind printconf)

  this is likely to cause various compilation problems
error: missing dependency 'cmdliner'
make[1]: *** [configure] Error 9
make[1]: Leaving directory `/home/opam/.opam/system/build/mirari.0.9.0'
make: *** [all] Error 2
Removing mirari.0.9.0.
  Nothing to do.


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
These actions have been completed successfully
 - install   cmdliner.0.9.7
 - install   obuild.0.1.1
The following failed
 - install   mirari.0.9.0

#=== ERROR while installing mirari.0.9.0 ======================================#
# opam-version         1.2.0
# os                   linux
# command              make
# path                 /home/opam/.opam/system/build/mirari.0.9.0
# compiler             system (4.02.1)
# exit-code            2
# env-file             /home/opam/.opam/system/build/mirari.0.9.0/mirari-837-d0f245.env
# stdout-file          /home/opam/.opam/system/build/mirari.0.9.0/mirari-837-d0f245.out
# stderr-file          /home/opam/.opam/system/build/mirari.0.9.0/mirari-837-d0f245.err
### stdout ###
# make configure
# make[1]: Entering directory `/home/opam/.opam/system/build/mirari.0.9.0'
# obuild configure
# Configuring mirari-0.9.0...
# make[1]: Leaving directory `/home/opam/.opam/system/build/mirari.0.9.0'
### stderr ###
# ...[truncated]
#   The ocamlfind configuration file used doesn't list the ocaml standard library 
#   as part of his search paths. something fishy is going on
#   You can solve the issue by:
#   * pointing OCAMLFIND_CONF environment to the right configuration file
#   * making sure that the ocamlfind program in your path is the right one (ocamlfind printconf)
# 
#   this is likely to cause various compilation problems
# error: missing dependency 'cmdliner'
# make[1]: *** [configure] Error 9
# make: *** [all] Error 2


The former state can be restored with opam switch import "/home/opam/.opam/system/backup/state-20150109171256.export"
'opam install mirari' failed.
