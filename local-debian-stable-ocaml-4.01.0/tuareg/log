++ opam install tuareg -e debian
Debian depexts: emacs
+ depext=emacs
+ echo Debian depexts: emacs
+ '[' emacs '!=' '' ']'
+ sudo apt-get update -y
Get:1 http://http.debian.net stable Release.gpg [1655 B]
Get:2 http://http.debian.net stable-updates Release.gpg [836 B]
Get:3 http://http.debian.net stable Release [168 kB]
Get:4 http://security.debian.org stable/updates Release.gpg [836 B]
Get:5 http://http.debian.net stable-updates Release [124 kB]
Get:6 http://security.debian.org stable/updates Release [102 kB]
Get:7 http://http.debian.net stable/main amd64 Packages [7625 kB]
Get:8 http://security.debian.org stable/updates/main amd64 Packages [293 kB]
Get:9 http://http.debian.net stable-updates/main amd64 Packages [3329 B]
Fetched 8319 kB in 3s (2417 kB/s)
Reading package lists...
+ sudo apt-get install -qq -y build-essential m4
+ sudo apt-get install -qq -y emacs
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package liblockfile-bin.
(Reading database ... 20143 files and directories currently installed.)
Unpacking liblockfile-bin (from .../liblockfile-bin_1.09-5_amd64.deb) ...
Selecting previously unselected package liblockfile1:amd64.
Unpacking liblockfile1:amd64 (from .../liblockfile1_1.09-5_amd64.deb) ...
Selecting previously unselected package libasound2:amd64.
Unpacking libasound2:amd64 (from .../libasound2_1.0.25-4_amd64.deb) ...
Selecting previously unselected package libatk1.0-data.
Unpacking libatk1.0-data (from .../libatk1.0-data_2.4.0-2_all.deb) ...
Selecting previously unselected package libatk1.0-0:amd64.
Unpacking libatk1.0-0:amd64 (from .../libatk1.0-0_2.4.0-2_amd64.deb) ...
Selecting previously unselected package libavahi-common-data:amd64.
Unpacking libavahi-common-data:amd64 (from .../libavahi-common-data_0.6.31-2_amd64.deb) ...
Selecting previously unselected package libavahi-common3:amd64.
Unpacking libavahi-common3:amd64 (from .../libavahi-common3_0.6.31-2_amd64.deb) ...
Selecting previously unselected package libavahi-client3:amd64.
Unpacking libavahi-client3:amd64 (from .../libavahi-client3_0.6.31-2_amd64.deb) ...
Selecting previously unselected package libpixman-1-0:amd64.
Unpacking libpixman-1-0:amd64 (from .../libpixman-1-0_0.26.0-4+deb7u1_amd64.deb) ...
Selecting previously unselected package libpng12-0:amd64.
Unpacking libpng12-0:amd64 (from .../libpng12-0_1.2.49-1_amd64.deb) ...
Selecting previously unselected package libxcb-render0:amd64.
Unpacking libxcb-render0:amd64 (from .../libxcb-render0_1.8.1-2+deb7u1_amd64.deb) ...
Selecting previously unselected package libxcb-shm0:amd64.
Unpacking libxcb-shm0:amd64 (from .../libxcb-shm0_1.8.1-2+deb7u1_amd64.deb) ...
Selecting previously unselected package libcairo2:amd64.
Unpacking libcairo2:amd64 (from .../libcairo2_1.12.2-3_amd64.deb) ...
Selecting previously unselected package libcroco3:amd64.
Unpacking libcroco3:amd64 (from .../libcroco3_0.6.6-2_amd64.deb) ...
Selecting previously unselected package libcups2:amd64.
Unpacking libcups2:amd64 (from .../libcups2_1.5.3-5+deb7u4_amd64.deb) ...
Selecting previously unselected package libdatrie1:amd64.
Unpacking libdatrie1:amd64 (from .../libdatrie1_0.2.5-3_amd64.deb) ...
Selecting previously unselected package libfribidi0:amd64.
Unpacking libfribidi0:amd64 (from .../libfribidi0_0.19.2-3_amd64.deb) ...
Selecting previously unselected package gconf2-common.
Unpacking gconf2-common (from .../gconf2-common_3.2.5-1+build1_all.deb) ...
Selecting previously unselected package libgconf-2-4:amd64.
Unpacking libgconf-2-4:amd64 (from .../libgconf-2-4_3.2.5-1+build1_amd64.deb) ...
Selecting previously unselected package libjpeg8:amd64.
Unpacking libjpeg8:amd64 (from .../libjpeg8_8d-1+deb7u1_amd64.deb) ...
Selecting previously unselected package libgd2-noxpm:amd64.
Unpacking libgd2-noxpm:amd64 (from .../libgd2-noxpm_2.0.36~rc1~dfsg-6.1_amd64.deb) ...
Selecting previously unselected package libjasper1:amd64.
Unpacking libjasper1:amd64 (from .../libjasper1_1.900.1-13+deb7u2_amd64.deb) ...
Selecting previously unselected package libjbig0:amd64.
Unpacking libjbig0:amd64 (from .../libjbig0_2.0-2+deb7u1_amd64.deb) ...
Selecting previously unselected package libtiff4:amd64.
Unpacking libtiff4:amd64 (from .../libtiff4_3.9.6-11_amd64.deb) ...
Selecting previously unselected package libgdk-pixbuf2.0-common.
Unpacking libgdk-pixbuf2.0-common (from .../libgdk-pixbuf2.0-common_2.26.1-1_all.deb) ...
Selecting previously unselected package libgdk-pixbuf2.0-0:amd64.
Unpacking libgdk-pixbuf2.0-0:amd64 (from .../libgdk-pixbuf2.0-0_2.26.1-1_amd64.deb) ...
Selecting previously unselected package libgtk2.0-common.
Unpacking libgtk2.0-common (from .../libgtk2.0-common_2.24.10-2_all.deb) ...
Selecting previously unselected package libthai-data.
Unpacking libthai-data (from .../libthai-data_0.1.18-2_all.deb) ...
Selecting previously unselected package libthai0:amd64.
Unpacking libthai0:amd64 (from .../libthai0_0.1.18-2_amd64.deb) ...
Selecting previously unselected package fontconfig.
Unpacking fontconfig (from .../fontconfig_2.9.0-7.1_amd64.deb) ...
Selecting previously unselected package libpango1.0-0:amd64.
Unpacking libpango1.0-0:amd64 (from .../libpango1.0-0_1.30.0-1_amd64.deb) ...
Selecting previously unselected package libxcursor1:amd64.
Unpacking libxcursor1:amd64 (from .../libxcursor1_1%3a1.1.13-1+deb7u1_amd64.deb) ...
Selecting previously unselected package libgtk2.0-0:amd64.
Unpacking libgtk2.0-0:amd64 (from .../libgtk2.0-0_2.24.10-2_amd64.deb) ...
Selecting previously unselected package librsvg2-2:amd64.
Unpacking librsvg2-2:amd64 (from .../librsvg2-2_2.36.1-2_amd64.deb) ...
Selecting previously unselected package emacsen-common.
Unpacking emacsen-common (from .../emacsen-common_2.0.5_all.deb) ...
Selecting previously unselected package emacs23-common.
Unpacking emacs23-common (from .../emacs23-common_23.4+1-4_all.deb) ...
Selecting previously unselected package emacs23-bin-common.
Unpacking emacs23-bin-common (from .../emacs23-bin-common_23.4+1-4_amd64.deb) ...
Selecting previously unselected package gconf-service.
Unpacking gconf-service (from .../gconf-service_3.2.5-1+build1_amd64.deb) ...
Selecting previously unselected package libgif4.
Unpacking libgif4 (from .../libgif4_4.1.6-10_amd64.deb) ...
Selecting previously unselected package libotf0.
Unpacking libotf0 (from .../libotf0_0.9.12-2_amd64.deb) ...
Selecting previously unselected package m17n-db.
Unpacking m17n-db (from .../m17n-db_1.6.3-2_all.deb) ...
Selecting previously unselected package m17n-contrib.
Unpacking m17n-contrib (from .../m17n-contrib_1.1.13-2_all.deb) ...
Selecting previously unselected package libm17n-0.
Unpacking libm17n-0 (from .../libm17n-0_1.6.3-2_amd64.deb) ...
Selecting previously unselected package emacs23.
Unpacking emacs23 (from .../emacs23_23.4+1-4_amd64.deb) ...
Selecting previously unselected package emacs.
Unpacking emacs (from .../archives/emacs_45.0_all.deb) ...
Selecting previously unselected package hicolor-icon-theme.
Unpacking hicolor-icon-theme (from .../hicolor-icon-theme_0.12-1_all.deb) ...
Selecting previously unselected package libgtk2.0-bin.
Unpacking libgtk2.0-bin (from .../libgtk2.0-bin_2.24.10-2_amd64.deb) ...
Selecting previously unselected package librsvg2-common:amd64.
Unpacking librsvg2-common:amd64 (from .../librsvg2-common_2.36.1-2_amd64.deb) ...
Setting up liblockfile-bin (1.09-5) ...
Setting up liblockfile1:amd64 (1.09-5) ...
Setting up libasound2:amd64 (1.0.25-4) ...
Setting up libatk1.0-data (2.4.0-2) ...
Setting up libatk1.0-0:amd64 (2.4.0-2) ...
Setting up libavahi-common-data:amd64 (0.6.31-2) ...
Setting up libavahi-common3:amd64 (0.6.31-2) ...
Setting up libavahi-client3:amd64 (0.6.31-2) ...
Setting up libpixman-1-0:amd64 (0.26.0-4+deb7u1) ...
Setting up libpng12-0:amd64 (1.2.49-1) ...
Setting up libxcb-render0:amd64 (1.8.1-2+deb7u1) ...
Setting up libxcb-shm0:amd64 (1.8.1-2+deb7u1) ...
Setting up libcairo2:amd64 (1.12.2-3) ...
Setting up libcroco3:amd64 (0.6.6-2) ...
Setting up libcups2:amd64 (1.5.3-5+deb7u4) ...
Setting up libdatrie1:amd64 (0.2.5-3) ...
Setting up libfribidi0:amd64 (0.19.2-3) ...
Setting up gconf2-common (3.2.5-1+build1) ...
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype

Creating config file /etc/gconf/2/path with new version
Setting up libgconf-2-4:amd64 (3.2.5-1+build1) ...
Setting up libjpeg8:amd64 (8d-1+deb7u1) ...
Setting up libgd2-noxpm:amd64 (2.0.36~rc1~dfsg-6.1) ...
Setting up libjasper1:amd64 (1.900.1-13+deb7u2) ...
Setting up libjbig0:amd64 (2.0-2+deb7u1) ...
Setting up libtiff4:amd64 (3.9.6-11) ...
Setting up libgdk-pixbuf2.0-common (2.26.1-1) ...
Setting up libgdk-pixbuf2.0-0:amd64 (2.26.1-1) ...
Setting up libgtk2.0-common (2.24.10-2) ...
Setting up libthai-data (0.1.18-2) ...
Setting up libthai0:amd64 (0.1.18-2) ...
Setting up fontconfig (2.9.0-7.1) ...
Regenerating fonts cache... done.
Setting up libpango1.0-0:amd64 (1.30.0-1) ...
Setting up libxcursor1:amd64 (1:1.1.13-1+deb7u1) ...
Setting up libgtk2.0-0:amd64 (2.24.10-2) ...
Setting up librsvg2-2:amd64 (2.36.1-2) ...
Setting up emacsen-common (2.0.5) ...
Setting up emacs23-common (23.4+1-4) ...
Setting up emacs23-bin-common (23.4+1-4) ...
update-alternatives: using /usr/bin/b2m.emacs23 to provide /usr/bin/b2m (b2m) in auto mode
update-alternatives: using /usr/bin/ctags.emacs23 to provide /usr/bin/ctags (ctags) in auto mode
update-alternatives: using /usr/bin/ebrowse.emacs23 to provide /usr/bin/ebrowse (ebrowse) in auto mode
update-alternatives: using /usr/bin/emacsclient.emacs23 to provide /usr/bin/emacsclient (emacsclient) in auto mode
update-alternatives: using /usr/bin/etags.emacs23 to provide /usr/bin/etags (etags) in auto mode
update-alternatives: using /usr/bin/grep-changelog.emacs23 to provide /usr/bin/grep-changelog (grep-changelog) in auto mode
update-alternatives: using /usr/bin/rcs-checkin.emacs23 to provide /usr/bin/rcs-checkin (rcs-checkin) in auto mode
Setting up gconf-service (3.2.5-1+build1) ...
Setting up libgif4 (4.1.6-10) ...
Setting up libotf0 (0.9.12-2) ...
Setting up m17n-db (1.6.3-2) ...
Setting up m17n-contrib (1.1.13-2) ...
Setting up libm17n-0 (1.6.3-2) ...
Setting up emacs23 (23.4+1-4) ...
update-alternatives: using /usr/bin/emacs23-x to provide /usr/bin/emacs (emacs) in auto mode
update-alternatives: using /usr/bin/emacs23 to provide /usr/bin/editor (editor) in auto mode
Install emacsen-common for emacs23
emacsen-common: Handling install of emacsen flavor emacs23
Wrote /etc/emacs23/site-start.d/00debian-vars.elc
Wrote /usr/share/emacs23/site-lisp/debian-startup.elc
Setting up emacs (45.0) ...
Setting up hicolor-icon-theme (0.12-1) ...
Setting up libgtk2.0-bin (2.24.10-2) ...
Setting up librsvg2-common:amd64 (2.36.1-2) ...
Processing triggers for libgdk-pixbuf2.0-0:amd64 ...
++ opam install tuareg -e source,linux
+ srcext=
+ echo Debian srcexts:
+ '[' '' '!=' '' ']'
+ opam install tuareg
Debian srcexts:
The following actions will be performed:
 - install   tuareg.2.0.8
=== 1 to install ===

=-=- Synchronizing package archives -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[default] Downloading http://opam-archive:8080/archives/tuareg.2.0.8+opam.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100 57779  100 57779    0     0  15.1M      0 --:--:-- --:--:-- --:--:-- 27.5M
200

=-=- Installing packages =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Building tuareg.2.0.8:
  make install INSTALL_DIR=/home/opam/.opam/4.01.0/share/tuareg
emacs --batch --no-init-file -f batch-byte-compile tuareg.el
Loading 00debian-vars...

In end of data:
tuareg.el:4939:1:Warning: the following functions are not known to be defined:
    smie-bnf->prec2, smie-merge-prec2s, smie-precs->prec2, smie-rule-parent-p,
    smie-rule-prev-p, smie-rule-bolp, smie-rule-separator, smie-rule-parent,
    smie-backward-sexp, smie-rule-hanging-p, smie-indent-virtual,
    smie-rule-next-p, smie-forward-sexp, smie-setup
Wrote /home/opam/.opam/4.01.0/build/tuareg.2.0.8/tuareg.elc
emacs --batch --no-init-file -f batch-byte-compile ocamldebug.el
Loading 00debian-vars...
Wrote /home/opam/.opam/4.01.0/build/tuareg.2.0.8/ocamldebug.elc
emacs --batch --no-init-file -f batch-byte-compile tuareg-site-file.el
Loading 00debian-vars...
Wrote /home/opam/.opam/4.01.0/build/tuareg.2.0.8/tuareg-site-file.elc
rm -f -r /home/opam/.opam/4.01.0/share/tuareg
mkdir -p /home/opam/.opam/4.01.0/share/tuareg
cp -f tuareg.el ocamldebug.el tuareg-site-file.el tuareg.elc ocamldebug.elc tuareg-site-file.elc /home/opam/.opam/4.01.0/share/tuareg/
Installing tuareg.2.0.8.

=-=- tuareg.2.0.8 installed successfully =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
=> Please add in ~/.emacs.d/init.el or ~/.emacs to following lines:
       (add-to-list 'load-path "INSTALL_DIR")
       (load "tuareg-site-file")
   where you must replace INSTALL_DIR by the value displayed during the
   above installation
