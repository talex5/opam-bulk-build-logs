+ uname -m
/usr/bin/lsb_release
+ uname -s
+ lsb_release -i -s
+ opam list --safe --recursive --external=x86_64,linux,ubuntu --required-by=spoc
# Detecting depexts using flags: x86_64 linux ubuntu
# The following system packages are needed:
#  - m4
+ opam list --safe --recursive --external=source,x86_64,linux,ubuntu --required-by=spoc
Not running as root, system installation will be done through "sudo"
+ sudo apt-get update
Ign http://archive.ubuntu.com trusty InRelease
Ign http://archive.ubuntu.com trusty-updates InRelease
Ign http://archive.ubuntu.com trusty-security InRelease
Hit http://archive.ubuntu.com trusty Release.gpg
Hit http://archive.ubuntu.com trusty-updates Release.gpg
Hit http://archive.ubuntu.com trusty-security Release.gpg
Hit http://archive.ubuntu.com trusty Release
Hit http://archive.ubuntu.com trusty-updates Release
Hit http://archive.ubuntu.com trusty-security Release
Hit http://archive.ubuntu.com trusty/main Sources
Hit http://archive.ubuntu.com trusty/restricted Sources
Hit http://archive.ubuntu.com trusty/universe Sources
Hit http://archive.ubuntu.com trusty/main amd64 Packages
Hit http://archive.ubuntu.com trusty/restricted amd64 Packages
Hit http://archive.ubuntu.com trusty/universe amd64 Packages
Hit http://archive.ubuntu.com trusty-updates/main Sources
Hit http://archive.ubuntu.com trusty-updates/restricted Sources
Hit http://archive.ubuntu.com trusty-updates/universe Sources
Hit http://archive.ubuntu.com trusty-updates/main amd64 Packages
Hit http://archive.ubuntu.com trusty-updates/restricted amd64 Packages
Hit http://archive.ubuntu.com trusty-updates/universe amd64 Packages
Hit http://archive.ubuntu.com trusty-security/main Sources
Hit http://archive.ubuntu.com trusty-security/restricted Sources
Hit http://archive.ubuntu.com trusty-security/universe Sources
Hit http://archive.ubuntu.com trusty-security/main amd64 Packages
Hit http://archive.ubuntu.com trusty-security/restricted amd64 Packages
Hit http://archive.ubuntu.com trusty-security/universe amd64 Packages
Reading package lists...
+ sudo apt-get install -qq -yy m4
# OS package update successful
Not running as root, system installation will be done through "sudo"
# OS packages installation successful
The following actions will be performed:
  - install ocp-build 0.1                                       [required by spoc]
  - install spoc      20140620
===== 2 to install =====

=-=- Gathering sources =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[ocp-build: from default] Command started
[spoc: from default] Command started
[ocp-build: from default] Command started
[spoc: from default] Command started
[default] http://opam-archive:8080/archives/ocp-build.0.1+opam.tar.gz downloaded
[default] http://opam-archive:8080/archives/spoc.20140620+opam.tar.gz downloaded

=-=- Processing actions -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[ocp-build: make] Command started
+ make  (CWD=/home/opam/.opam/system/build/ocp-build.0.1)
- mkdir -p ./_obuild
- ocamlc -o ./_obuild/unixrun -make-runtime unix.cma
- _obuild/unixrun boot/ocp-build.boot -init -scan -sanitize -v 0 ocp-build
- ocp-build: Entering directory `/home/opam/.opam/system/build/ocp-build.0.1'
- ocp-build: Leaving directory `/home/opam/.opam/system/build/ocp-build.0.1'
- Compilation successful
- Cache: 0 digests loaded
- No error. 293 commands executed, 397 files generated.
-> installed ocp-build.0.1
[spoc: make build] Command started
+ make "build" (CWD=/home/opam/.opam/system/build/spoc.20140620)
- ocp-build -init
- ocp-build: Entering directory `/home/opam/.opam/system/build/spoc.20140620'
- ocp-build: Leaving directory `/home/opam/.opam/system/build/spoc.20140620'
- cd extension && make
- make[1]: Entering directory `/home/opam/.opam/system/build/spoc.20140620/extension'
- ocamlfind ocamlc -I +camlp4 -pp camlp4of dynlink.cma camlp4lib.cma kernels_ext.ml
- make[1]: Leaving directory `/home/opam/.opam/system/build/spoc.20140620/extension'
- Cache: 0 digests loaded
- make[1]: ocamlfind: Command not found
- make[1]: *** [kernels_ext.cma] Error 127
- make: *** [build] Error 2
[ERROR] The compilation of spoc failed at "make build".
[spoc: make uninstall] Command started
+ make "uninstall" (CWD=/home/opam/.opam/system/build/spoc.20140620)
- ocamlfind remove spoc
- make: ocamlfind: Command not found
- make: *** [uninstall] Error 127


=-=- Error report -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
The following actions failed
  - install spoc 20140620
The following changes have been performed
  - install ocp-build 0.1

#=== ERROR while installing spoc.20140620 =====================================#
# opam-version         1.2.1 (ab224ffd593a168871a14182d6e69d3a902c3f27)
# os                   linux
# command              make build
# path                 /home/opam/.opam/system/build/spoc.20140620
# compiler             system (4.01.0)
# exit-code            2
# env-file             /home/opam/.opam/system/build/spoc.20140620/spoc-5-6cc03f.env
# stdout-file          /home/opam/.opam/system/build/spoc.20140620/spoc-5-6cc03f.out
# stderr-file          /home/opam/.opam/system/build/spoc.20140620/spoc-5-6cc03f.err
### stdout ###
# ocp-build -init
# ocp-build: Entering directory `/home/opam/.opam/system/build/spoc.20140620'
# ocp-build: Leaving directory `/home/opam/.opam/system/build/spoc.20140620'
# cd extension && make
# make[1]: Entering directory `/home/opam/.opam/system/build/spoc.20140620/extension'
# ocamlfind ocamlc -I +camlp4 -pp camlp4of dynlink.cma camlp4lib.cma kernels_ext.ml
# make[1]: Leaving directory `/home/opam/.opam/system/build/spoc.20140620/extension'
### stderr ###
# Cache: 0 digests loaded
# make[1]: ocamlfind: Command not found
# make[1]: *** [kernels_ext.cma] Error 127
# make: *** [build] Error 2


The former state can be restored with:
    opam switch import "~/.opam/system/backup/state-20150306172111.export"
'opam install spoc' failed.
